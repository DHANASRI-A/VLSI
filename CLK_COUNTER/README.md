### Structural Modelling - Counters

This structural modelling (in counters) consists of three modules:

1. **Top Module** – The `clk_counter` module
2. **Sub Module 1** – The `clock divider` module
3. **Sub Module 2** – The `3-bit counter` module

---

#### 1. The `clk_counter` Module (Top Module)
- **Purpose:** Connects the `counter` and `clockdivider` modules, acting as an interface between external inputs/outputs and internal submodules.
- **Inputs:**  
  - `clk`: The input clock signal (e.g., 100 MHz).
  - `rst`: The active-low reset signal.
- **Outputs:**
  - `q`: The 3-bit counter output.
- **Internal Signal:**
  - `c_out`: The divided clock signal generated by the `clockdivider` module.
- **Submodule Instantiation:**
  - The `clockdivider` module generates the divided clock signal (`c_out`).
  - The `counter` module uses `c_out` as its clock and produces the 3-bit counter output (`q`).

```verilog
`timescale 1ns/1ps
module clk_counter(q, clk, rst);
output [7:0] q;
input clk,rst;
wire c_out;
clockdivider clk_div(c_out,clk,rst);
counter cnt(q,c_out, rst);

endmodule
```

---

#### 2. The `clockdivider` Module
- The ZedBoard's default clock speed of **100 MHz** is too high to observe the counter output directly.
- A `clockdivider` circuit is used to reduce the frequency to **1 Hz**.
- The `counter` module receives this 1 Hz signal as its clock input.

```verilog
module clockdivider( c_out,clk,rst);
output reg c_out;
input clk,rst;
reg [27:0]count;
always @(posedge clk or negedge rst)
begin
if(!rst)begin
c_out<=0;
count<=0;
end
else if( count==50000000 )begin
count<=0;
c_out<=~c_out;
end
else begin
count<=count+1;

end 
end

endmodule
```

---

#### 3. The `3-bit Counter` Module
- **Purpose:** Counts from `000` to `111` (0 to 7 in decimal).
- **Functionality:**
  - Increments its value on each positive edge of the clock signal (`c_out`).
  - Resets to `000` when `rst` is low (negative edge-triggered reset).
  - When `rst` is high, it counts up by `1` on each positive clock edge.
- **Frequency Calculation:**
  - Since `c_out` is 1 Hz, each increment happens every **1 second**.
  - Counting range: `0` to `7` (8 counts total).
  - Total time required for counting from `0` to `7`: **8 seconds**.

```verilog
module counter(q,c_out,rst);
output reg [7:0]q;
input c_out,rst;
always @(posedge c_out or negedge rst )begin
if(!rst)begin
q<=8'b00000000;
end
else begin
q<=q+1;
end
end 
endmodule
```

- **Important Note:** For one pulse to generate, **two toggles are required**. A pulse consists of a **high state (1) and a low state (0)**. In the `clockdivider` module, the `c_out` signal toggles between `0` and `1` every 0.5 seconds. So, one complete pulse (0 -> 1 -> 0) takes **1 second**.

---

#### 4. Important Calculations
- **Clock Divider:**
  - The counter counts up to **50,000,000 clock cycles**.
  - With a 100 MHz input clock, each cycle is **10 ns**.
  - Time for one clock pulse: `10 ns × 50,000,000 = 0.5 seconds`.
- **Frequency of `c_out`:** `1 Hz` (Toggles every 0.5 seconds).
- **For 1 clock pulse:** `0.5 seconds`.
- **Example Calculation:** Counting from `0` to `2` requires **3 pulses**, so `3 × 1 second = 3 seconds`.

